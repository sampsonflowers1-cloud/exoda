<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>ÎˆÎ¾Î¿Î´Î± ÎœÎ±Î³Î±Î¶Î¹Î¿Ï</title>
<style>
body{
font-family: Arial;
background:#f5f5f5;
padding:20px;
}
h1{
text-align:center;
}
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
gap:10px;
margin-top:20px;
}
button{
padding:20px;
font-size:14px;
border:none;
background:#1976d2;
color:white;
border-radius:8px;
cursor:pointer;
}
button:hover{
background:#125aa0;
}
</style>
</head>
<body>

<h1>ÎˆÎ¾Î¿Î´Î± ÎœÎ±Î³Î±Î¶Î¹Î¿Ï</h1>
<div class="grid" id="grid"></div>


  
  
<script>
const TOTAL = 30;

// names = Ï„Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± Ï€Î¿Ï… Î¸Î± Ï†Î±Î¯Î½Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬
let names = JSON.parse(localStorage.getItem("exoda_names") || "null");

// Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î¿Î½ÏŒÎ¼Î±Ï„Î±, Ï†Ï„Î¹Î¬Ï‡Î½ÎµÎ¹ Ï„Î± default (Î ÏÎ¿Î¼Î·Î¸ÎµÏ…Ï„Î®Ï‚ 1..30)
if (!Array.isArray(names) || names.length !== TOTAL) {
  names = [];
  for (let i = 1; i <= TOTAL; i++) names.push("Î ÏÎ¿Î¼Î·Î¸ÎµÏ…Ï„Î®Ï‚ " + i);
  localStorage.setItem("exoda_names", JSON.stringify(names));
}



const grid=document.getElementById("grid");
let data=JSON.parse(localStorage.getItem("exoda")||"{}");

names.forEach(name=>{
if(!data[name]) data[name]=[];

const btn=document.createElement("button");
btn.textContent=name;
// Î”ÎµÎ¾Î¯ ÎºÎ»Î¹Îº = ÎœÎµÏ„Î¿Î½Î¿Î¼Î±ÏƒÎ¯Î±
btn.oncontextmenu = (e) => {
  e.preventDefault();

  const newName = prompt("ÎÎ­Î¿ ÏŒÎ½Î¿Î¼Î± Î³Î¹Î±: " + name, name);
  if (!newName) return;

  const clean = newName.trim();
  if (!clean) return;

  // Î­Î»ÎµÎ³Ï‡Î¿Ï‚ Î½Î± Î¼Î·Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î®Î´Î· Î¯Î´Î¹Î¿ ÏŒÎ½Î¿Î¼Î±
  if (names.includes(clean) && clean !== name) {
    alert("Î¥Ï€Î¬ÏÏ‡ÎµÎ¹ Î®Î´Î· Î±Ï…Ï„ÏŒ Ï„Î¿ ÏŒÎ½Î¿Î¼Î±.");
    return;
  }

  // Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¬ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï (Ï„Î± Î»ÎµÏ†Ï„Î¬) Î±Ï€ÏŒ Ï€Î±Î»Î¹ÏŒ ÏŒÎ½Î¿Î¼Î± ÏƒÎµ Î½Î­Î¿
  if (data[name] && name !== clean) {
    data[clean] = data[name];
    delete data[name];
    localStorage.setItem("exoda", JSON.stringify(data));
  }

  // Î±Î»Î»Î±Î³Î® Î¿Î½ÏŒÎ¼Î±Ï„Î¿Ï‚ ÏƒÏ„Î· Î»Î¯ÏƒÏ„Î± ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½
  const idx = names.indexOf(name);
  if (idx !== -1) {
    names[idx] = clean;
    localStorage.setItem("exoda_names", JSON.stringify(names));
  }

  location.reload(); // Î±Î½Î±Î½Î­Ï‰ÏƒÎ· Î³Î¹Î± Î½Î± Ï†Î±Î½Î¿ÏÎ½ Ï„Î± Î½Î­Î± Î¿Î½ÏŒÎ¼Î±Ï„Î±
};

// === Popup (modal) Î¼Î¯Î± Ï†Î¿ÏÎ¬ Î³Î¹Î± ÏŒÎ»Î· Ï„Î· ÏƒÎµÎ»Î¯Î´Î± ===
let modal = document.getElementById("modal");
if (!modal) {
  modal = document.createElement("div");
  modal.id = "modal";
  modal.style.cssText = `
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    display:none; align-items:center; justify-content:center; z-index:9999;
  `;

  modal.innerHTML = `
    <div id="modalBox" style="
      width:min(720px,95vw); max-height:85vh; overflow:auto;
      background:#fff; border-radius:10px; padding:14px 14px 10px 14px;
      box-shadow:0 10px 35px rgba(0,0,0,.35); position:relative;
      font-family:Arial;
    ">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
        <h2 id="modalTitle" style="margin:0; font-size:18px;"></h2>
        <button id="modalClose" style="
          padding:8px 12px; border:none; border-radius:8px; cursor:pointer;
          background:#ddd;
        ">ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿</button>
      </div>

      <div style="margin-top:10px; display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        <label style="font-size:14px;">ÎÎ­Î¿ Ï€Î¿ÏƒÏŒ:</label>
        <input id="newAmount" type="number" step="0.01" style="
          padding:8px; border:1px solid #ccc; border-radius:8px; width:160px;
        " />
        <button id="addAmountBtn" style="
          padding:8px 12px; border:none; border-radius:8px; cursor:pointer;
          background:#1976d2; color:#fff;
        ">Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button>
        <div id="sumBox" style="margin-left:auto; font-weight:bold;"></div>
      </div>

      <div style="margin-top:10px; font-size:13px; color:#444;">
        * Î”ÎµÎ¾Î¯ ÎºÎ»Î¹Îº Ï€Î¬Î½Ï‰ ÏƒÎµ Î³ÏÎ±Î¼Î¼Î® (Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±â€“Ï€Î¿ÏƒÏŒ) Î³Î¹Î± <b>Î”Î¹Î±Î³ÏÎ±Ï†Î®</b>.
      </div>

      <div id="rowsWrap" style="margin-top:10px;"></div>
    </div>

    <div id="ctxMenu" style="
      position:fixed; display:none; z-index:10000;
      background:#fff; border:1px solid #ccc; border-radius:8px;
      box-shadow:0 8px 25px rgba(0,0,0,.25);
      min-width:140px; overflow:hidden;
      font-family:Arial;
    ">
      <div id="ctxDelete" style="padding:10px 12px; cursor:pointer;">ğŸ—‘ Î”Î¹Î±Î³ÏÎ±Ï†Î®</div>
      <div id="ctxCancel" style="padding:10px 12px; cursor:pointer; border-top:1px solid #eee;">Î‘ÎºÏÏÏ‰ÏƒÎ·</div>
    </div>
  `;

  document.body.appendChild(modal);

  // ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ modal
  modal.addEventListener("click", (e) => {
    if (e.target === modal) modal.style.display = "none";
  });
  document.getElementById("modalClose").onclick = () => (modal.style.display = "none");

  // ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ context menu Î¼Îµ click Î¿Ï€Î¿Ï…Î´Î®Ï€Î¿Ï„Îµ
  document.addEventListener("click", () => {
    const cm = document.getElementById("ctxMenu");
    cm.style.display = "none";
  });
}

// Helpers
function saveData() {
  localStorage.setItem("exoda", JSON.stringify(data));
}

function renderModalRows(currentName) {
  const rowsWrap = document.getElementById("rowsWrap");
  rowsWrap.innerHTML = "";

  const arr = data[currentName] || [];
  let total = 0;

  if (arr.length === 0) {
    rowsWrap.innerHTML = `<div style="padding:12px; background:#f6f6f6; border-radius:8px;">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ®ÏƒÎµÎ¹Ï‚.</div>`;
  } else {
    const table = document.createElement("div");
    table.style.cssText = "display:flex; flex-direction:column; gap:6px;";

    arr.forEach((item, idx) => {
      total += Number(item.amount) || 0;

      const row = document.createElement("div");
      row.style.cssText = `
        display:flex; justify-content:space-between; gap:10px;
        padding:10px 12px; background:#f7f7f7; border-radius:8px;
        cursor:default;
      `;
      row.innerHTML = `<div><b>${item.date}</b></div><div>${item.amount} â‚¬</div>`;

      // Î”ÎµÎ¾Î¯ ÎºÎ»Î¹Îº ÏƒÏ„Î· Î³ÏÎ±Î¼Î¼Î® -> context menu
      row.oncontextmenu = (e) => {
        e.preventDefault();

        const cm = document.getElementById("ctxMenu");
        const del = document.getElementById("ctxDelete");
        const cancel = document.getElementById("ctxCancel");

        cm.style.left = e.clientX + "px";
        cm.style.top = e.clientY + "px";
        cm.style.display = "block";

        cancel.onclick = () => (cm.style.display = "none");

        del.onclick = () => {
          cm.style.display = "none";
          const ok = confirm(`Î”Î¹Î±Î³ÏÎ±Ï†Î® Ï„Î·Ï‚ Î³ÏÎ±Î¼Î¼Î®Ï‚;\n${item.date} â€” ${item.amount} â‚¬`);
          if (!ok) return;

          // ÏƒÎ²Î®ÏƒÎ¹Î¼Î¿ Î³ÏÎ±Î¼Î¼Î®Ï‚
          data[currentName].splice(idx, 1);
          saveData();
          renderModalRows(currentName);
        };
      };

      table.appendChild(row);
    });

    rowsWrap.appendChild(table);
  }

  document.getElementById("sumBox").textContent = `Î£ÏÎ½Î¿Î»Î¿: ${total} â‚¬`;
}

function openModalFor(name) {
  document.getElementById("modalTitle").textContent = `Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ: ${name}`;
  document.getElementById("newAmount").value = "";
  renderModalRows(name);

  const addBtn = document.getElementById("addAmountBtn");
  addBtn.onclick = () => {
    const v = document.getElementById("newAmount").value;
    if (v === "" || v === null) return;

    const num = Number(v);
    if (!isFinite(num)) return;

    const date = new Date().toISOString().slice(0, 10);
    if (!data[name]) data[name] = [];
    data[name].push({ amount: num, date: date });
    saveData();
    renderModalRows(name);
    document.getElementById("newAmount").value = "";
  };

  modal.style.display = "flex";
}

// === Î¤ÎŸ ÎÎ•ÎŸ onClick: Î±Î½Î¿Î¯Î³ÎµÎ¹ Ï„Î¿ modal ===
btn.onclick = () => {
  openModalFor(name);
};

grid.appendChild(btn);
});




          


</script>

</body>
</html>


